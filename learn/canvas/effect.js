function colorRgb(t){if("transparent"==t)return"transparent";if((t=t.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var a="#",i=1;i<4;i+=1)a+=t.slice(i,i+1).concat(t.slice(i,i+1));t=a}var r=[];for(i=1;i<7;i+=2)r.push(parseInt("0x"+t.slice(i,i+2)));return r}return t}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout(void 0);var effectTypeFn={firework:function(t,a,i,r,e,o,h,s,n){var l;n=void 0===n?1:n;var d,c,u=i[0],y=u.getContext("2d"),f=t,p=a,g=[],m=[],M=120,v=4,x=0,w=0==h?20:1==h?40:60,C=0,b=!1;function R(t,a){return Math.random()*(a-t)+t}function D(t,a,i,r){var e=t-i,o=a-r;return Math.sqrt(Math.pow(e,2)+Math.pow(o,2))}function A(t,a,i,h){for(this.x=t,this.y=a,this.sx=t,this.sy=a,this.tx=i,this.ty=h,this.distanceToTarget=D(t,a,i,h),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);if(this.angle=Math.atan2(h-a,i-t),this.speed=2,this.acceleration=1.05,this.targetRadius=0,0===e)this.ColorData={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o};else{var s=colorRgb(r);this.ColorData={Red:s[0],Green:s[1],Blue:s[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.ColorData.Opacity+")"}function I(t,a){for(this.x=t,this.y=a,this.coordinates=[],this.coordinateCount=5;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);if(this.angle=R(0,2*Math.PI),this.speed=R(1,10),this.friction=.95,this.gravity=1,this.hue=R(M-20,M+20),this.brightness=R(10,80),this.alpha=o,this.decay=R(.015,.03),0===e)this.ColorData={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o};else{var i=colorRgb(r);this.ColorData={Red:i[0],Green:i[1],Blue:i[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.ColorData.Opacity+")"}return u.width=f,u.height=p,A.prototype.update=function(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.targetRadius=0,this.speed*=this.acceleration;var a=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;this.distanceTraveled=D(this.sx,this.sy,this.x+a,this.y+i),this.distanceTraveled>=this.distanceToTarget?(!function(t,a){var i=200;for(;i--;)m.push(new I(t,a))}(this.tx,this.ty),g.splice(t,1)):(this.x+=a,this.y+=i)},A.prototype.draw=function(){y.beginPath(),y.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),y.lineTo(this.x,this.y),y.strokeStyle=this.color,y.stroke(),y.beginPath(),y.arc(this.tx,this.ty,this.targetRadius,0,2*Math.PI),y.stroke()},I.prototype.update=function(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&m.splice(t,1)},I.prototype.draw=function(){y.beginPath(),y.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),y.lineTo(this.x,this.y),y.strokeStyle=this.color,y.stroke()},function t(){l=requestAnimFrame(t),M+=.5,y.globalCompositeOperation="destination-out",y.fillStyle="rgba(0, 0, 0, 1)",y.fillRect(0,0,f,p),y.globalCompositeOperation="lighter";for(var a=g.length;a--;)g[a].draw(),g[a].update(a);for(a=m.length;a--;)m[a].draw(),m[a].update(a);C>=w?b||(g.push(new A(f/2,p,R(0,f),R(0,p/2))),C=0):C++,x>=v?b&&(g.push(new A(f/2,p,d,c)),x=0):x++}(),function(){cancelRequestAnimFrame(l)}},snowflake:function(t,a,i,r,e,o,h,s,n){var l,d,c=i[0].getContext("2d"),u=0==h?200:1==h?100:50,y=5,f=10,p=[];return function(){var i,o;l=0,0;for(var h=0;h<u;h++)o=0===e?"rgb("+(i={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random())}).Red+", "+i.Green+","+i.Blue+")":r,p[h]={x:Math.ceil(Math.random()*t),y:Math.ceil(Math.random()*a),toX:5*Math.random()+1,toY:5*Math.random()+1,c:o,size:Math.random()*y}}(),function i(){c.clearRect(0,0,t,a),c.globalAlpha=o;for(var r=0;r<u;r++){var e=p[r];c.beginPath(),c.arc(e.x,e.y,e.size,0,2*Math.PI,!1),c.fillStyle=e.c,c.fill(),e.x=e.x+e.toX*(.05*l),e.y=e.y+e.toY*(.05*l),e.x>t&&(e.x=0),e.y>a&&(e.y=0),e.x<0&&(e.x=t),e.y<0&&(e.y=a)}l<f&&l++,d=requestAnimFrame(i)}(),function(){cancelRequestAnimFrame(d)}},universe:function(t,a,i,r,e,o,h,s,n){var l,d=i[0].getContext("2d"),c=t,u=a,y=[],f=0,p=0==h?500:1==h?350:200;"transparent"==r&&(r="#000000");var g=colorRgb(r);return d&&function(){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=100,t.height=100;var i=t.width/2,r=a.createRadialGradient(i,i,0,i,i,i);function e(t,a){if(arguments.length<2&&(a=t,t=0),t>a){var i=a;a=t,t=i}return Math.floor(Math.random()*(a-t+1))+t}a.globalAlpha=o,r.addColorStop(.16,"#FBFAF8"),r.addColorStop(.3,"rgba("+g[0]+","+g[1]+","+g[2]+",1)"),r.addColorStop(.4,"rgba("+g[0]+","+g[1]+","+g[2]+",.6)"),r.addColorStop(.6,"rgba("+g[0]+","+g[1]+","+g[2]+",.2)"),r.addColorStop(1,"rgba(0,0,0,0)"),a.fillStyle=r,a.beginPath(),a.arc(i,i,i,0,2*Math.PI),a.fill();var h=function(){var t,a,i;this.orbitRadius=e((t=c,a=u,i=Math.max(t,a),Math.round(Math.sqrt(i*i+i*i))/3)),this.radius=e(60,this.orbitRadius)/20,this.orbitX=c/2,this.orbitY=u/2,this.timePassed=e(0,p),this.speed=e(this.orbitRadius)/1e5,this.alpha=e(2,10)/5,y[++f]=this};h.prototype.draw=function(){var a=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,i=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,r=e(10);1===r&&this.alpha>0?this.alpha-=.05:2===r&&this.alpha<1&&(this.alpha+=.05),d.globalAlpha=this.alpha,d.drawImage(t,a-this.radius/2,i-this.radius/2,this.radius,this.radius),this.timePassed+=this.speed};for(var s=0;s<p;s++)new h}(),function t(){d.clearRect(0,0,c,u),d.globalCompositeOperation="lighter";for(var a=1,i=y.length;a<i;a++)y[a].draw();l=requestAnimationFrame(t)}(),function(){cancelRequestAnimFrame(l)}},particle:function(t,a,i,r,e,o,h,s,n){var l,d=i[0],c=d.getContext("2d");r="transparent"==r?"rgba(0,0,0,0)":r||"#fff",n=void 0===n?1:n,d.width=t,d.height=a;for(var u=0==h?100:1==h?50:30,y=[],f={o:function(t,a,i,h,s){return{x:t,y:a,r:12*i*n,w:5*i,dx:h,dy:s,Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o,draw:function(a,i){if(this.x+=this.dx,this.y+=this.dy,0===e)this.ColorData={Red:this.Red,Green:this.Green,Blue:this.Blue,Opacity:this.Opacity};else{var h=colorRgb(r);this.ColorData={Red:h[0],Green:h[1],Blue:h[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.ColorData.Opacity+")",a.beginPath(),a.arc(this.x+15*+Math.sin((50+t+i/10)/100),this.y+20*+Math.sin((45+t+i/10)/100),this.r,0,2*Math.PI,!1),a.lineWidth=this.w,a.strokeStyle=this.color,a.stroke()}}},x:function(t,a,i,h,s,l,d){return{x:t,y:a,s:20*i*n,w:5*i,r:d=d||0,dx:h,dy:s,dr:l,Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o,draw:function(a,i){if(this.x+=this.dx,this.y+=this.dy,this.r+=this.dr,0===e)this.ColorData={Red:this.Red,Green:this.Green,Blue:this.Blue,Opacity:this.Opacity};else{var h=colorRgb(r);this.ColorData={Red:h[0],Green:h[1],Blue:h[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.ColorData.Opacity+")";var s=this,n=function(t,i,r,e,o,h){h=h||0,a.beginPath(),a.moveTo(-h+s.s/2*t,h+s.s/2*i),a.lineTo(-h+s.s/2*r,h+s.s/2*e),a.lineWidth=s.w,a.strokeStyle=o,a.stroke()};a.save(),a.translate(this.x+20*Math.sin((t+i/10)/100),this.y+10*Math.sin((10+t+i/10)/100)),a.rotate(this.r*Math.PI/180),n(-1,-1,1,1,this.color),n(1,-1,-1,1,this.color),a.restore()}}}};u>0;){var p=Math.random()*d.width,g=Math.random()*d.height,m=(5*Math.random()+1)/10;1==Math.round(Math.random())?y.push(f.o(p,g,m,0,0)):y.push(f.x(p,g,m,0,0,(3*Math.random()-1)/10,360*Math.random())),--u}return function t(){l=requestAnimFrame(t),c.clearRect(0,0,d.width,d.height);var a=(new Date).getTime();for(var i in y)y[i].draw(c,a)}(),function(){cancelRequestAnimFrame(l)}},flowerOrRedPacket:function(t,a,i,r,e,o,h,s,n){var l,d,c=i[0],u=document.createElement("canvas");u.width=t,u.height=a;var y,f=new Image;try{if(3==s){var p=colorRgb(r);r="rgba("+p[0]+","+p[1]+","+p[2]+",1)",f.src='data:image/svg+xml,<svg version="1.1" width="30px" height="30px" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 133 121" style="enable-background:new 0 0 133 121;" xml:space="preserve"><path id="形状_1" style="fill:'+r+';" d="M7,121c-0.3,0.2-4.1-9.4-4.3-10C0.9,105.1,0,99,0,92.9C0,75.7,7.6,60,19.4,47.7C32.1,34.5,48,24.4,65.2,18.1c8.6-3.1,17.6-5.4,26.6-6.6c12.7-1.7,24.7-0.4,33.6-11.5c0.6-0.8,4.6,8.1,4.9,8.9c1.3,3.8,2.1,7.9,2.3,11.9c0.6,9.1-2,18-5.3,26.3c-8.5,23.3-27.5,45.2-58.8,60.9C34.1,124.5,26.9,106.7,7,121z"/><path id="形状_2" style="opacity:0.2;fill:rgba(255,255,255,1);enable-background:new    ;" d="M18.3,112.4c0,0,28.8,5.2,51.3-7.1C103.8,86.6,129,61.3,132,22c0,0-5.2,22.6-61.9,59.2C52,93.1,39,113,18.3,112.4z"/></svg>'}else f.src='data:image/svg+xml,<svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 100 140.1" style="enable-background:new 0 0 100 140.1;" xml:space="preserve"><style type="text/css">\t.st0{fill:rgba(232,58,53,1);}\t.st1{fill:rgba(198,26,30,1);}\t.st2{fill:rgba(180,29,35,1);}\t.st3{fill:rgba(242, 229, 95,1);}\t.st4{fill:rgba(215, 121, 13,1);}\t.st5{fill:rgba(245, 164, 23,1);}\t.st6{fill:rgba(199, 24, 30,1);}\t.st7{fill:rgba(245, 226, 65,1);}</style><g id="XMLID_14_">\t<path id="XMLID_47_" class="st0" d="M87.4,140.1H12.6c-7,0-12.6-5.7-12.6-12.6V12.6C0,5.7,5.7,0,12.6,0h74.7c7,0,12.6,5.7,12.6,12.6v114.8C100,134.4,94.3,140.1,87.4,140.1z"/><polygon id="XMLID_43_" class="st1" points="0,28.8 0,60 13.9,40.4 \t"/>\t<polygon id="XMLID_33_" class="st1" points="100,28.8 100,60 86.1,40.4 \t"/>\t<path id="XMLID_31_" class="st2" d="M0,28.8c0,0,17,27.6,48.4,27.6c39,0,51.5-27.6,51.5-27.6H0z"/><path id="XMLID_29_" class="st0" d="M0,28.8c0,0,20.2,25.7,48.4,25.7c35.4,0,51.5-25.7,51.5-25.7H0z"/>\t<circle id="XMLID_24_" class="st3" cx="50" cy="56" r="23.8"/><g id="XMLID_21_"><circle id="XMLID_23_" class="st4" cx="49.7" cy="55.7" r="18.2"/><circle id="XMLID_22_" class="st5" cx="50.3" cy="56.4" r="18.2"/></g><path id="XMLID_20_" class="st6" d="M10.7,140c0.3,0,0.5,0,0.8,0h77c0.3,0,0.5,0,0.8,0c-10.1-2.6-23.9-4.1-39.3-4.1\t\tS20.8,137.4,10.7,140z"/><g id="XMLID_15_"><g id="XMLID_17_"><g id="XMLID_75_"><path id="XMLID_76_" class="st4" d="M42.1,61.4H47v-4.5h-5.5v-2H46l-5.3-10.1h6.3l2.9,6.1l2.9-6.1h6.3L54,54.9h4.6v2h-5.5v4.5\t\t\t\t\tH58v2h-4.9v5.5H47v-5.5h-4.9V61.4z"/>\t\t\t</g>\t\t</g>\t\t<g id="XMLID_16_">\t\t\t<g id="XMLID_78_">\t\t\t\t<path id="XMLID_79_" class="st7" d="M41.8,60.9h4.9v-4.5h-5.5v-2h4.6l-5.3-10.1h6.3l2.9,6.1l2.9-6.1H59l-5.3,10.1h4.6v2h-5.5v4.5h4.9v2h-4.9v5.5h-6.1v-5.5h-4.9V60.9z"/></g></g></g></g></svg>'}catch(t){f.src=3==s?Flyer._resRoot+"/image/canvasImages/flower_1.svg":Flyer._resRoot+"/image/canvasImages/redPack.svg",console.log("canvas"+t)}return n=void 0===n?1:n,f.onload=function(){function i(){return Math.floor(Math.random()*t)}function r(t,a){return Math.floor(Math.random()*(a-t)+t)*n}if(c.getContext){l=c.getContext("2d"),d=u.getContext("2d"),l.globalAlpha=o,d.globalAlpha=o;var e=[],p=0==h?15:1==h?10:5,g=1;7==s&&(g=1.4);var m=10,M=50;!function(){for(var t=0;t<p;t++)e.push({con:f,top:Math.floor(Math.random()*a),left:i(),deg:r(-10,10),scale:r(m,M),topIncrease:1*Math.random()+1})}(),function o(){l.clearRect(0,0,t,a),d.clearRect(0,0,t,a);for(var h=0;h<e.length;h++){var s=.1*e[h].scale;e[h].left=e[h].left+Math.tan(e[h].deg*Math.PI/180)*s,e[h].top=e[h].top+ +e[h].topIncrease,l.beginPath(),e[h].left>t||e[h].top>a?e.splice(h,1):(d.drawImage(e[h].con,e[h].left,e[h].top,e[h].scale,e[h].scale*g),d.fill())}for(;e.length<p;)e.push({con:f,top:0,left:i(),deg:r(-10,10),scale:r(m,M),topIncrease:1*Math.random()+1});l.drawImage(u,0,0,t,a),y=requestAnimFrame(o)}()}},function(){cancelRequestAnimFrame(y)}},bubble:function(t,a,i,r,e,o,h,s,n){var l,d=i[0],c=d.getContext("2d"),u=colorRgb(r),y=0==h?50:1==h?30:20;function f(){this.alive=!0,this.x=Math.round(Math.random()*d.width),this.y=Math.round(Math.random()*d.height),this.diameter=30.8*Math.random()*n,0===e?this.ColorData={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random())}:"transparent"!=u&&(this.ColorData={Red:u[0],Green:u[1],Blue:u[2]}),"transparent"==u?this.color="rgba(0,0,0,0)":(this.alpha=o,this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.alpha+")"),this.velocity={x:Math.round(Math.random()<.5?-1:1)*Math.random()*.8,y:Math.round(Math.random()<.5?-1:1)*Math.random()*.8}}n=void 0===n?1:n,f.prototype={Draw:function(){c.fillStyle=this.color,c.beginPath(),c.arc(this.x,this.y,this.diameter,0,2*Math.PI,!1),c.fill()},Update:function(){this.alpha<.8&&("transparent"==u?this.color="rgba(0,0,0,0)":(this.alpha=o,this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.alpha+")")),this.x+=this.velocity.x,this.y+=this.velocity.y,(this.x>d.width+20||this.x<-20||this.y>d.height+20||this.y<-20)&&(this.alive=!1)}};var p={rArray:[],Init:function(){d.width=t,d.height=a;for(var i=0;i<y;i++)this.rArray.push(new f);this.Update()},Draw:function(){c.clearRect(0,0,d.width,d.height),this.rArray.forEach(function(t){t.Draw()})},Update:function(){if(p.rArray.length<y)for(var t=p.rArray.length;t<y;t++)p.rArray.push(new f);p.rArray.forEach(function(t){t.Update()}),p.rArray=p.rArray.filter(function(t){return t.alive}),p.Draw(),l=requestAnimFrame(p.Update)}};return p.Init(),function(){cancelRequestAnimFrame(l)}},line:function(t,a,i,r,e,o,h,s,n){for(var l,d=i[0],c=(h=0==h?6e3:1==h?8e3:1e4,d.width=t),u=d.height=a,y=d.getContext("2d"),f=c*u/h|0,p=4,g=80,m=[],M=0;M<f;++M)m.push(new v);function v(){if(this.x=Math.random()*c,this.y=Math.random()*u,this.vx=(Math.random()-.5)*p,this.vy=(Math.random()-.5)*p,0===e)this.ColorData={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o};else{var t=colorRgb(r);this.ColorData={Red:t[0],Green:t[1],Blue:t[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.ColorData.Opacity+")"}return v.prototype.update=function(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>c)&&(this.vx*=-1),(this.y<0||this.y>u)&&(this.vy*=-1)},function t(){l=requestAnimFrame(t),y.clearRect(0,0,c,u);for(var a=0;a<m.length;++a){var i=m[a];i.update();for(var r=a+1;r<m.length;++r){var e=m[r];h=e,s=g,n=(o=i).x-h.x,d=o.y-h.y,n*n+d*d<=s*s&&(y.strokeStyle=i.color,y.beginPath(),y.moveTo(i.x,i.y),y.lineTo(e.x,e.y),y.stroke())}}var o,h,s,n,d}(),function(){cancelRequestAnimFrame(l)}},heart:function(t,a,i,r,e,o,h,s,n){var l=null,d=i[0],c=d.getContext("2d");if(n=void 0===n?1:n,c){var u=4,y=0===h?15:1===h?10:5;function f(){if(this.active=!0,this.x=Math.round(Math.random()*d.width),this.y=d.height,this.radius=Math.round(40*Math.random()),this.radius=this.radius<15?15:this.radius,this.radius*=n,0===e)this.ColorData={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o};else{var t=colorRgb(r);this.ColorData={Red:t[0],Green:t[1],Blue:t[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+this.ColorData.Opacity+")",this.velocity={x:0,y:Math.round(Math.random()*u)+2}}f.prototype={draw:function(){var t=this.radius/8;c.save(),c.beginPath(),c.strokeStyle="rgba(0,0,0,0)",c.fillStyle=this.color,c.arc(this.x+2*t,this.y+2*t,3*t,.7*Math.PI,0,!1),c.arc(this.x+6*t,this.y+2*t,3*t,Math.PI,.3*Math.PI,!1),c.moveTo(this.x,this.y+4*t),c.lineTo(this.x+this.radius,this.y+4*t+1),c.lineTo(this.x+4*t,this.y+this.radius),c.lineTo(this.x,this.y+4*t+1),c.closePath(),c.fill(),c.stroke()},update:function(){this.x+=this.velocity.x,this.y-=this.velocity.y,(this.x>=d.width||this.x<=0||this.y>=d.height||this.y<=0)&&(this.active=!1)}};var p={rArray:[],init:function(){d.width=t,d.height=a;for(var i=0;i<y;i++)this.rArray.push(new f);this.update()},draw:function(){c.clearRect(0,0,d.width,d.height),this.rArray.forEach(function(t){t.draw()})},update:function(){if(p.rArray.length<y)for(var t=p.rArray.length;t<y;t++)p.rArray.push(new f);p.rArray.forEach(function(t){t.update()}),p.rArray=p.rArray.filter(function(t){return t.active}),p.draw(),l=requestAnimFrame(p.update)}};p.init()}return function(){cancelRequestAnimFrame(l)}},meteor:function(t,a,i,r,e,o,h,s,n){var l=null,d=i[0];if(n=void 0===n?1:n,d.getContext){var c=d.getContext("2d"),u=5,y=0===h?15:1===h?10:5;function f(){if(this.active=!0,this.x=Math.round(Math.random()*(d.width+500)),this.y=Math.round(50*Math.random()),0===e)this.ColorData={Red:Math.round(255*Math.random()),Green:Math.round(255*Math.random()),Blue:Math.round(255*Math.random()),Opacity:o};else{var t=colorRgb(r);this.ColorData={Red:t[0],Green:t[1],Blue:t[2],Opacity:o}}this.color="rgba("+this.ColorData.Red+", "+this.ColorData.Green+","+this.ColorData.Blue+","+(this.ColorData.Opacity-.4)+")";var a=2*Math.random().toFixed(2);a=a>.5?a:1,this.velocity={x:u*Math.sin(.25*Math.PI)*a+2,y:u*Math.cos(.25*Math.PI)*a+2}}f.prototype={draw:function(){c.save(),c.strokeStyle=this.color,c.fillStyle=this.color,c.beginPath(),c.moveTo(this.x+100*n,this.y-50*n),c.lineTo(this.x+15*n,this.y+45*n),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(this.x+7*n,this.y+53*n),c.lineTo(this.x+3*n,this.y+60*n),c.lineTo(this.x+7*n,this.y+67*n),c.lineTo(this.x,this.y+63*n),c.lineTo(this.x-7*n,this.y+67*n),c.lineTo(this.x-3*n,this.y+60*n),c.lineTo(this.x-7*n,this.y+53*n),c.lineTo(this.x,this.y+57*n),c.lineTo(this.x+7*n,this.y+53*n),c.closePath(),c.fill(),c.stroke()},update:function(){this.x-=this.velocity.x,this.y+=this.velocity.y,(this.x>=d.width+500||this.x<=-50||this.y>=d.height+100||this.y<=-60)&&(this.active=!1)}};var p={rArray:[],init:function(){d.width=t,d.height=a;for(var i=0;i<y;i++)this.rArray.push(new f);this.update()},draw:function(){c.clearRect(0,0,d.width,d.height),this.rArray.forEach(function(t){t.draw()})},update:function(){if(p.rArray.length<y)for(var t=p.rArray.length;t<y;t++)p.rArray.push(new f);p.rArray.forEach(function(t){t.update()}),p.rArray=p.rArray.filter(function(t){return t.active}),p.draw(),l=requestAnimFrame(p.update)}};p.init()}return function(){cancelRequestAnimFrame(l)}}};
